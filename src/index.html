<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Story table</title>
	<link rel="stylesheet" href="css/init.css">
	<link rel="stylesheet" href="css/animation.css">

	<script src="bower_components/webcomponentsjs/webcomponents.js"></script>
	<link rel="import" href="bower_components/rise-storage/rise-storage/rise-storage.html">
</head>
<body>


	<main role="main">
		<ul></ul>

		<rise-storage
			companyId="76ef5f8c-cd7b-4041-bff2-728a81366d12"
			folder="the-story"
			folderRefresh="60">
		</rise-storage>
	</main>


	<script src="js/viewportSize.js"></script>
	<script src="js/animationSequence.js"></script>
	<script>
		window.addEventListener( 'polymer-ready', function( e ) {
			'use strict';
			var storage = document.querySelector( 'rise-storage' );

			var mediaList = document.querySelector( 'main ul' );

			// get file list from storage
			storage.addEventListener( 'rise-storage-response', function( e ) {

				// append to HTML
				e.detail.forEach(function( src ) {
					var li = document.createElement( 'li' );
					var button = document.createElement( 'button' );
					var img = document.createElement( 'img' );
					img.src = src;

					li.appendChild( button );
					button.appendChild( img );
					mediaList.appendChild( li );
				});

				// start the player
				riseVisionStoryPlayer().play();
			});

			storage.go(); // Call its API methods.
		});
	</script>
</body>
</html>